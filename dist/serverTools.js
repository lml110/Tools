!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("serverTools",[],t):"object"==typeof exports?exports.serverTools=t():e.serverTools=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var t={};e.d(t,{default:function(){return E}});function n(e){const t=Object.prototype.toString;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Promise]":"promise","[object Map]":"map","[object Set]":"set","[object Map Iterator]":"map-iterator","[[object Symbol]]":"symbol","[object Module]":"module"}[t.call(e)]||t.call(e)}var r=function(e){let t=[];return function e(r){let o=n(r);if(t.includes(r))return;t.push(r);let i="array"===o?[]:"object"===o?{}:r;if("array"===o)for(let t=0;t<r.length;t++)i.push(e(r[t]));else if("object"===o)for(let t in r)r.hasOwnProperty(t)&&(i[t]=e(r[t]));return i}(e)},o=function(e){return"object"===n(e)};const i="object"==typeof e.g&&null!==e.g&&e.g.Object===Object&&e.g,u="object"==typeof globalThis&&null!==globalThis&&globalThis.Object==Object&&globalThis,c="object"==typeof self&&null!==self&&self.Object===Object&&self;var l=u||i||c||Function("return this")(),a=function(e,t,n){let r,i,u,c,a,f,s=0,p=!1,g=!1,d=!0;const h=!t&&0!==t&&"function"==typeof l.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){const n=r,o=i;return r=i=void 0,s=t,c=e.apply(o,n),c}function b(e,t){return h?(l.cancelAnimationFrame(a),l.requestAnimationFrame(e)):setTimeout(e,t)}function m(e){const n=e-f;return void 0===f||n>=t||n<0||g&&e-s>=u}function j(){const e=Date.now();if(m(e))return w(e);a=b(j,function(e){const n=e-s,r=t-(e-f);return g?Math.min(r,u-n):r}(e))}function w(e){return a=void 0,d&&r?y(e):(r=i=void 0,c)}function O(...e){const n=Date.now(),o=m(n);if(r=e,i=this,f=n,o){if(void 0===a)return function(e){return s=e,a=b(j,t),p?y(e):c}(f);if(g)return a=b(j,t),y(f)}return void 0===a&&(a=b(j,t)),c}return t=+t||0,o(n)&&(p=!!n.leading,g="maxWait"in n,u=g?Math.max(+n.maxWait||0,t):u,d="trailing"in n?!!n.trailing:d),O.cancel=function(){void 0!==a&&function(e){if(h)return l.cancelAnimationFrame(e);clearTimeout(e)}(a),s=0,r=f=i=a=void 0},O.flush=function(){return void 0===a?c:w(Date.now())},O.pending=function(){return void 0!==a},O};const f=function(e){return e&&"object"==typeof e&&e.get?e:{get:()=>e}};var s=function(e){return"number"===n(e)?e:+e},p=function(e=9,t=0){return Math.floor(Math.random()*(e-t+1)+t)},g=function(e,t=2){return Number.prototype.toFixed.call(s(e),t)},d=function(e,t,r){let o=e;return"function"===n(t)?o=e.filter(t):"string"===n(t)&&(o=e.filter((e=>e[t]))),r&&(o=o.map((e=>e[r]))),o};function h(e,t,r,o={}){const{childKey:i="children",sucessFn:u=function(e){this.push(e)}}=o;let c=[];return"array"===n(e)&&(c=e.reduce((function(e,n,o,c){if(t(n))u.call(e,n);else{let e=d(c,((e,t)=>r(e,n)));e&&1==e.length?e[0][i]?u.call(e[0][i],n):e[0][i]=[n]:console.log("查询错误",n,e)}return e}),[])),c}let y,b,m;const j=function(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=y(o,t);if(i&&n.push(i),b){let e=b(o,t);if(e&&o[e]){let t=j(o[e],o);m&&(n=m(n,t)||n)}}}return n};let w,O;const v=function(e,t){let n;for(let r=0;r<e.length;r++){let o=e[r];if(w(o,t))return o;if(O){let e=O(o);e&&(n=v(e,o))}if(n)return n}return n};var x=function(e,t=2){if(!t||t<0)return str;let n="";const r=e<0,o=String(Math.abs(e));return o.length<t&&(n=new Array(t-o.length+1).join("0")),(r?"-":"")+n+o},M=l.location||{},D=function(e,t,n){let r=-1,o=e.length;for(;++r<o;)t.call(n,e[r],r,"array")},S=function(e,t,n){for(let r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,"object")},P=function(e,t,r){if(t)return"array"===n(e)?D(e,t,r):"object"===n(e)?S(e,t,r):void 0};const T=function(e){if(1==e.length)return[e];let t=[];for(let n=0;n<e.length;n++){let r=e[n],o=e.slice(0);o.splice(n,1);let i=T(o);for(let e=0;e<i.length;e++)i[e].unshift(r);t=t.concat(i)}return t},_=function(e,t,n=[],r=[]){if(1===t)return n.push(...e.map((e=>[...r,e]))),n;for(let o=0;o<e.length-t+1;o++){let i=[...r,e[o]];_(e.slice(o+1),t-1,n,i)}return n};var E={_deepCopy:r,_cloneObj:function(e){let t=Array.isArray(e)?[]:{};if(JSON)try{t=JSON.parse(JSON.stringify(e))}catch(n){console.log("stringify",n),t=r(e)}else t=r(e);return t},getFormData:(e={},t={})=>{let n=new FormData;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t]);for(let e in t)if(t.hasOwnProperty(e)&&t[e]&&t[e].length){let r=t[e];for(let t=0,o=r.length;t<o;t++)n.append(e,r[t])}return n},typeOf:n,debounce:a,throttle:function(e,t,n){let r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),a(e,t,{leading:r,trailing:i,maxWait:t})},definePros:function(e,t,n){return n?Object.defineProperty(e,n,f(t)):t&&"object"==typeof t?Object.defineProperties(e,function(e){let t={};for(let n in e)t[n]=f(e[n]);return t}(t)):e},_keyid:function(){return Number(Math.random().toString().substr(3,8)+Date.now()).toString(36)},_seedId:function(e){let t="0";if(e)for(let n=0;n<e;n++)t+=p();return s(t)},_toNumber:s,_toNumFixed:function(e,t){return s(g(e,t))},formatJsonStr:function(e,t){return e?t?e.split(t):"string"===typeOf(e)?function(e){try{return JSON.parse(e)}catch(t){return e}}(e):"array"===typeOf(e)&&e:[]},getFileName:function(e){return e&&e.replace(/(.*\/)*([^.]+).*/gi,"$2")||""},getFileExtName:function(e){return e.replace(/.+\./,"").toLowerCase()},babelToFileName:function(e,t){return t?e.replace(/[A-Z]/g,(function(e,t){return t?"-"+e.toLowerCase():e.toLowerCase()})):e.replace(/\-\b(\w)|\-\s(\w)/g,(function(e,t){return t.toUpperCase()}))},_float:function(e,t){let n=Math.pow(10,t||2);return Math.round(e*n)/n},numberPad:x,numberComma:function(e,t=3){return(e=String(e).split("."))[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),e.join(".")},numberRandom:p,afreshSetTree:h,arrayToTree:function(e,t,n){if(t=Object.assign({parentProperty:"parentId",childrenProperty:"children",customID:"id",rootID:0},t),!Array.isArray(e))throw new TypeError("Expected an array but got an invalid argument");return h(e,(e=>e[t.parentProperty]==t.rootID),((e,n)=>e[t.customID]==n[t.parentProperty]),{sucessFn:n,childKey:t.childrenProperty})},filterList:function(e,t,r,o){if("array"!==n(e)||"function"!==n(t))return!1;if(y=t,r){let e=n(r);b="function"===e?r:"string"===e&&(e=>r),m=o}return j(e)},findTarget:function(e,t,r){if("array"!==n(e)||"function"!==n(t))return!1;if(w=t,r){let e=n(r);O="function"===e?r:"string"===e&&(e=>e[r])}return v(e)},isChinese:function(e){return/^[\u4e00-\u9fa5]{0,}$/.test(e)},isEmptyObject:function(e){for(let t in e)return!1;return!0},isUndefined:function(e){return void 0===e},isObject:o,isNulls:function(e){return!e||0==e},_noValue:function(e){return!e&&0!==e},checkEmail:function(e){return/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(e)},checkPhone:function(e){return!!/^1\d{10}$/.test(e)},_formatDate:function(e,t="yyyy-MM-DD hh:mm:ss"){"date"!==n(e)&&(e=e?new Date(e):new Date);let r={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in r)r.hasOwnProperty(e)&&new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[e]:("00"+r[e]).substr((""+r[e]).length)));return t},_getAllDate:function(e,t=["SUN","MON","TUE","WED","THU","FRI","SAT"]){"date"!==n(e)&&(e=e?new Date(e):new Date);let r={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()};for(let e in r)r.hasOwnProperty(e)&&(r[e]=x(r[e]));return r.week_key=e.getDay(),r.week=t[r.week_key],r},_getAllParams:e=>{e=e||M.href;let t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"params",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=14;for(;o--;)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,(function(e,n,o){n&&(r[t.q.name][n]=o)})),r},_getParams:function(e,t){e||(e=M.href);let n={};if(!e)return n;if(t)return function(e,t){e||(e=M.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}(e,t);let r=/(\?)(?!.*\1)+[^#]*/.exec(e);return r=r?r[0]:"",r.replace(/([^?&=]+)=([^?&=]*)/g,(function(e,t,r){let o=decodeURIComponent(t),i=decodeURIComponent(r);return i=String(i),n[o]=i,e})),n},_paramsToString:function(e,t,r=[void 0,null]){let o=[];return P(e,(function(e,t){if(r&&r.includes(e))return!1;let i="string"===n(e)?e:JSON.stringify(e);o.push(t+"="+i)})),"string"===n(t)?o.length?t+o.join("&"):"":o},getNameOrKey:d,mergeJson:function(e,...t){let r=e?new Map:new Set;return t&&t.length>1&&t.map((function(t){"array"==n(t)&&t.reduce((function(t,n){return e?n&&n[e]&&(t.has(n[e])?console.log("重名元素",n):t.set(n[e],n)):t.has(n)?console.log("重名元素",n):t.add(n),t}),r)})),e?Array.from(r.values()):Array.from(r)},isArrRepeat:function(e,t){if(1==t){let t={};for(let n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1}return new Set(e).size!=e.length},getPermutation:T,getCombine:_,_compareVersion:function(e,t){e=e.split("."),t=t.split(".");let n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let r=0;r<n;r++){let n=+e[r],o=+t[r];if(n>o)return 1;if(n<o)return-1}return 0},Cutsubstr:function(e,t=12,n=!0){if(!e||!t)return"";let r="";for(let o=0;o<e.length&&t>0;o++)r+=e.substr(o,1),t-=n&&e.charCodeAt(o)>127?2:1;return r.length<e.length&&(r+="..."),r},_for:P,_forObject:S,_forEach:D,_filter:function(e,t,n){return t?"object"===typeOf(e)?function(e,t,n){let r={},o=typeOf(t);for(let i in e)e.hasOwnProperty(i)&&("function"===o&&t.call(n,e[i],i)||"array"===o&&t.includes(i))&&(r[i]=e[i]);return r}(e,t,n):"array"===typeOf(e)?Array.prototype.filter.call(e,t,n):void 0:e},_toFixed:g,_trim:(e,t)=>{e||(e="");let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n}};return t.default}()}));