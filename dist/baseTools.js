!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("baseTools",[],t):"object"==typeof exports?exports.baseTools=t():e.baseTools=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>ae});const n=function(e){return e.replace(/.+\./,"").toLowerCase()};function r(e){const t=Object.prototype.toString;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Promise]":"promise","[object Map]":"map","[object Set]":"set","[object Map Iterator]":"map-iterator","[[object Symbol]]":"symbol","[object Module]":"module"}[t.call(e)]||t.call(e)}const o=function(e){let t=[];return function e(n){let o=r(n);if(t.includes(n))return;t.push(n);let i="array"===o?[]:"object"===o?{}:n;if("array"===o)for(let t=0;t<n.length;t++)i.push(e(n[t]));else if("object"===o)for(let t in n)n.hasOwnProperty(t)&&(i[t]=e(n[t]));return i}(e)},i=function(e){return"object"===r(e)},a="object"==typeof e.g&&null!==e.g&&e.g.Object===Object&&e.g,l="object"==typeof globalThis&&null!==globalThis&&globalThis.Object==Object&&globalThis,c="object"==typeof self&&null!==self&&self.Object===Object&&self,s=l||a||c||Function("return this")(),u=function(e,t,n){let r,o,a,l,c,u,f=0,g=!1,p=!1,d=!0;const h=!t&&0!==t&&"function"==typeof s.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){const n=r,i=o;return r=o=void 0,f=t,l=e.apply(i,n),l}function y(e,t){return h?(s.cancelAnimationFrame(c),s.requestAnimationFrame(e)):setTimeout(e,t)}function b(e){const n=e-u;return void 0===u||n>=t||n<0||p&&e-f>=a}function w(){const e=Date.now();if(b(e))return v(e);c=y(w,function(e){const n=e-f,r=t-(e-u);return p?Math.min(r,a-n):r}(e))}function v(e){return c=void 0,d&&r?m(e):(r=o=void 0,l)}function j(...e){const n=Date.now(),i=b(n);if(r=e,o=this,u=n,i){if(void 0===c)return function(e){return f=e,c=y(w,t),g?m(e):l}(u);if(p)return c=y(w,t),m(u)}return void 0===c&&(c=y(w,t)),l}return t=+t||0,i(n)&&(g=!!n.leading,p="maxWait"in n,a=p?Math.max(+n.maxWait||0,t):a,d="trailing"in n?!!n.trailing:d),j.cancel=function(){void 0!==c&&function(e){if(h)return s.cancelAnimationFrame(e);clearTimeout(e)}(c),f=0,r=u=o=c=void 0},j.flush=function(){return void 0===c?l:v(Date.now())},j.pending=function(){return void 0!==c},j},f=function(e){return e&&"object"==typeof e&&e.get?e:{get:()=>e}},g=function(e){return"number"===r(e)?e:+e},p=function(e=9,t=0){return Math.floor(Math.random()*(e-t+1)+t)},d=function(e,t=2){return Number.prototype.toFixed.call(g(e),t)},h=function(e,t){return g(d(e,t))};function m(e,t,n){let o=e;return"function"===r(t)?o=e.filter(t):"string"===r(t)&&(o=e.filter((e=>e[t]))),n&&(o=o.map((e=>e[n]))),o}function y(e,t,n,o={}){const{childKey:i="children",sucessFn:a=function(e){this.push(e)}}=o;let l=[];return"array"===r(e)&&(l=e.reduce((function(e,r,o,l){if(t(r))a.call(e,r);else{let e=m(l,((e,t)=>n(e,r)));e&&1==e.length?e[0][i]?a.call(e[0][i],r):e[0][i]=[r]:console.log("查询错误",r,e)}return e}),[])),l}const b=function(e,t={},n){if("array"!==r(e))return e;const{ifFN:o,handleFN:i,parentFN:a,childKey:l}=t;let c=[];for(let s=0;s<e.length;s++){let u=e[s],f=[];"function"===r(a)&&"object"===r(n)&&"object"===r(u)&&(u=a(u,n)),o&&o(u)?f=b(l?u[l]:u,t,u):c.push(u),"function"===r(i)&&(f=i(f)),f.length&&(c=c.concat(f))}return c},w=b,v=function(e,t=2){if(!t||t<0)return str;let n="";const r=e<0,o=String(Math.abs(e));return o.length<t&&(n=new Array(t-o.length+1).join("0")),(r?"-":"")+n+o},j=function(e){return void 0===e},S=function(e){return!e&&0!==e};function D(e,t="yyyy-MM-DD hh:mm:ss"){if(!e)return"";"object"!=typeof e&&(e=new Date(e));let n={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in n)n.hasOwnProperty(e)&&new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t}const x=s.location||{},E=function(e,t,n){let r=-1,o=e.length;for(;++r<o;)t.call(n,e[r],r,"array")},M=function(e,t,n){for(let r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,"object")},O=function(e,t,n){if(t)return"array"===r(e)?E(e,t,n):"object"===r(e)?M(e,t,n):void 0},T=function(e){if(1==e.length)return[e];let t=[];for(let n=0;n<e.length;n++){let r=e[n],o=e.slice(0);o.splice(n,1);let i=T(o);for(let e=0;e<i.length;e++)i[e].unshift(r);t=t.concat(i)}return t},_=function(e,t,n=[],r=[]){if(1===t)return n.push(...e.map((e=>[...r,e]))),n;for(let o=0;o<e.length-t+1;o++){let i=[...r,e[o]];_(e.slice(o+1),t-1,n,i)}return n},C=(e,t)=>{e||(e="");let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n},R={_deepCopy:o,_cloneObj:function(e){let t=Array.isArray(e)?[]:{};if(JSON)try{t=JSON.parse(JSON.stringify(e))}catch(n){console.log("stringify",n),t=o(e)}else t=o(e);return t},getFormData:(e={},t={})=>{let n=new FormData;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t]);for(let e in t)if(t.hasOwnProperty(e)&&t[e]&&t[e].length){let r=t[e];for(let t=0,o=r.length;t<o;t++)n.append(e,r[t])}return n},typeOf:r,debounce:u,throttle:function(e,t,n){let r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),u(e,t,{leading:r,trailing:o,maxWait:t})},definePros:function(e,t,n){return n?Object.defineProperty(e,n,f(t)):t&&"object"==typeof t?Object.defineProperties(e,function(e){let t={};for(let n in e)t[n]=f(e[n]);return t}(t)):e},_keyid:function(){return Number(Math.random().toString().substr(3,8)+Date.now()).toString(36)},_seedId:function(e){let t="0";if(e)for(let n=0;n<e;n++)t+=p();return g(t)},_toNumber:g,_toNumFixed:h,formatJsonStr:function(e,t){return e?t?e.split(t):"string"===typeOf(e)?JSON.parse(e):"array"===typeOf(e)&&e:[]},getFileName:function(e){return e&&e.replace(/(.*\/)*([^.]+).*/gi,"$2")||""},getFileExtName:n,babelToFileName:function(e,t){return t?e.replace(/[A-Z]/g,(function(e,t){return t?"-"+e.toLowerCase():e.toLowerCase()})):e.replace(/\-\b(\w)|\-\s(\w)/g,(function(e,t){return t.toUpperCase()}))},_float:function(e,t){let n=Math.pow(10,t||2);return Math.round(e*n)/n},numberPad:v,numberComma:function(e,t=3){return(e=String(e).split("."))[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),e.join(".")},numberRandom:p,afreshSetTree:y,arrayToTree:function(e,t,n){if(t=Object.assign({parentProperty:"parentId",childrenProperty:"children",customID:"id",rootID:0},t),!Array.isArray(e))throw new TypeError("Expected an array but got an invalid argument");return y(e,(e=>e[t.parentProperty]==t.rootID),((e,n)=>e[t.customID]==n[t.parentProperty]),{sucessFn:n,childKey:t.childrenProperty})},filterList:w,isChinese:function(e){return/^[\u4e00-\u9fa5]{0,}$/.test(e)},isEmptyObject:function(e){for(let t in e)return!1;return!0},isUndefined:j,isObject:i,isNulls:function(e){return!e||0==e},_noValue:S,checkEmail:function(e){return/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(e)},checkPhone:function(e){return!!/^1\d{10}$/.test(e)},_formatDate:D,_getAllDate:(e,t=["SUN","MON","TUE","WED","THU","FRI","SAT"])=>{"object"!=typeof e&&(e=e?new Date(e):new Date);let n={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()};for(let e in n)n.hasOwnProperty(e)&&(n[e]=v(n[e]));return n.week_key=e.getDay(),n.week=t[n.week_key],n},_getAllParams:e=>{e=e||x.href;let t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"params",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=14;for(;o--;)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,(function(e,n,o){n&&(r[t.q.name][n]=o)})),r},_getParams:function(e,t){e||(e=x.href);let n={};if(!e)return n;if(t)return function(e,t){e||(e=x.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}(e,t);let r=/(\?)(?!.*\1)+[^#]*/.exec(e);return r=r?r[0]:"",r.replace(/([^?&=]+)=([^?&=]*)/g,(function(e,t,r){let o=decodeURIComponent(t),i=decodeURIComponent(r);return i=String(i),n[o]=i,e})),n},_paramsToString:function(e,t){let n=[];return O(e,(function(e,t){if(null!=e&&null!=e){let o="string"===r(e)?e:JSON.stringify(e);n.push(t+"="+o)}})),"string"===r(t)?n.length?t+n.join("&"):"":n},getNameOrKey:m,mergeJson:function(e,...t){let n=e?new Map:new Set;return t&&t.length>1&&t.map((function(t){"array"==r(t)&&t.reduce((function(t,n){return e?n&&n[e]&&(t.has(n[e])?console.log("重名元素",n):t.set(n[e],n)):t.has(n)?console.log("重名元素",n):t.add(n),t}),n)})),e?Array.from(n.values()):Array.from(n)},isArrRepeat:function(e,t){if(1==t){let t={};for(let n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1}return new Set(e).size!=e.length},getPermutation:T,getCombine:_,_compareVersion:function(e,t){e=e.split("."),t=t.split(".");let n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let r=0;r<n;r++){let n=+e[r],o=+t[r];if(n>o)return 1;if(n<o)return-1}return 0},Cutsubstr:function(e,t=12,n=!0){if(!e||!t)return"";let r="";for(let o=0;o<e.length&&t>0;o++)r+=e.substr(o,1),t-=n&&e.charCodeAt(o)>127?2:1;return r.length<e.length&&(r+="..."),r},_for:O,_forObject:M,_forEach:E,_filter:function(e,t,n){return t?"object"===typeOf(e)?function(e,t,n){let r={},o=typeOf(t);for(let i in e)e.hasOwnProperty(i)&&("function"===o&&t.call(n,e[i],i)||"array"===o&&t.includes(i))&&(r[i]=e[i]);return r}(e,t,n):"array"===typeOf(e)?Array.prototype.filter.call(e,t,n):void 0:e},_toFixed:d,_trim:C},A=s.navigator||{},L=new class{constructor(e){this.versions=this.getVersions(),this.language=this.getLanguage()}getVersions(){let e=A.userAgent,t=e.toLowerCase();return A.appVersion,{trident:e.includes("Trident"),presto:e.includes("Presto"),webKit:e.includes("AppleWebKit"),gecko:e.includes("Gecko")&&!e.includes("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.includes("Android")||e.includes("Linux"),iPhone:e.includes("iPhone"),iPad:e.includes("iPad"),webApp:!e.includes("Safari"),isWechat:"micromessenger"==t.match(/MicroMessenger/i),weibo:"weibo"==t.match(/WeiBo/i),qq:"qq"==t.match(/QQ/i)}}getLanguage(){let e=A.browserLanguage||A.language;return e&&e.toLowerCase()}getIosVersion(){let e=A.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);return e?e[1].replace(/_/g,"."):""}getWechatVersion(){let e=A.userAgent&&A.userAgent.match(/MicroMessenger\/([\d\.]+)/i);return e?e[1]:""}},P=L.versions,k=s.document||{},F=k.createElement("div").style,U=function(){let e,t=["t","webkitT","MozT","msT","OT"],n=0,r=t.length;for(;n<r;n++)if(e=t[n]+"ransform",e in F)return t[n].substr(0,t[n].length-1);return!1}();function I(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))}const N=function(e,t="click"){var n;s.MouseEvent?n=new MouseEvent(t):(n=k.createEvent("MouseEvents")).initMouseEvent(t,!0,!1,s,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)},$=function(e,t){let n=k.createElement("a");n.download=t||"photo",n.href=e,N(n)},z=k.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},q=k.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)},B=function(e){if(!e)return!1;let t=0;return M(e,(function(n,r){t+=e.getItem(r).length})),{unit:"KB",currentSize:t?h(t/1024):0,maxSize:5120}},K=function(e){return e?encodeURIComponent(e):e},V=function(e){return e?decodeURIComponent(e):e},W=function(e){return e?JSON.parse(V(e)):e},H=function(e){return e?K(JSON.stringify(e)):e},J={get(e){let t=new RegExp("(?:^|; )"+K(e)+"=([^;]*)").exec(k.cookie);return"array"===r(t)&&W(t[1])},set(e,t,n={}){if(!e)return this.clear();if(S(t)&&(n.expires=-1),"number"===r(n.expires)){let e=n.expires,t=n.expires=new Date;t.setDate(t.getDate()+e)}return k.cookie=[K(e),"=",H(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")},remove(e){if(e)return this.set(e)},clear(e){if(e)this.remove(e);else{let e=this.keys();for(let t=e.length;t--;)this.remove(e[t])}},keys:()=>V(k.cookie).match(/[^ =;]+(?=\=)/g),info:()=>({unit:"KB",currentSize:k.cookie.length?h(k.cookie.length/1024):0,maxSize:4})},Y={get:e=>W(localStorage.getItem(K(e))),set(e,t){if(!e)return this.clear();S(t)?localStorage.removeItem(K(e)):localStorage.setItem(K(e),H(t))},remove(e){e&&this.set(e)},clear(e){e?this.remove(e):localStorage.clear()},keys:()=>Object.keys(localStorage).map(((e,t)=>V(e))),info:()=>B(localStorage)},X={get:e=>W(sessionStorage.getItem(K(e))),set(e,t){if(!e)return this.clear();S(t)?sessionStorage.removeItem(K(e)):sessionStorage.setItem(K(e),H(t))},remove(e){e&&this.set(e)},clear(e){e?this.remove(e):sessionStorage.clear()},keys:()=>Object.keys(sessionStorage).map(((e,t)=>V(e))),info:()=>B(sessionStorage)},G=function(e=new Date){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},Q=s.webkitURL||s.URL,Z=function(e,t){return t&&function(e){s.revokeObjectURL?revokeObjectURL(e):Q.revokeObjectURL(e)}(t),s.createObjectURL?createObjectURL(e):Q.createObjectURL(e)},ee=function(e,t){return new Promise(((n,r)=>{let o=new Image;t&&(o.crossOrigin="Anonymous"),o.onload=function(){n(o)},o.src=e}))},te=function(e,t=!0){return"array"==r(e)?Promise.all(e.map(((e,n)=>ee(e,t)))):ee(e,t)},ne=function(e,t,n){if(n)return $(e,t);{let n=Z(e);return ne(n,t,ne)}},re=ne,oe=function(e,t){let r={jpg:"image/jpeg",png:"image/png"},o=r[e?/^http/.test(e)?n(e):e:"jpg"]||r.jpg;return this&&this.toDataURL(o,t||.8)},ie=P.isWechat,ae={server:R,browser:L,versions:P,readyDOM:function(e){k.addEventListener?k.addEventListener("DOMContentLoaded",e,!1):k.attachEvent?k.attachEvent("onreadystatechange",(function(){"interactive"!=k.readystate&&"complete"!=k.readystate||(k.detachEvent("onreadystatechange",arguments.callee),e())})):s.onload=e},prefixStyle:function(e){return!1!==U&&(""===U?e:U+e.charAt(0).toUpperCase()+e.substr(1))},getCssStyle:function(e,t){let n=e.style[I(t)];if(!n)if(k.defaultView&&k.defaultView.getComputedStyle){let r=k.defaultView.getComputedStyle(e,null);n=r?r.getPropertyValue(t):null}else e.currentStyle&&(n=e.currentStyle[I(t)]);return n.replace(/px$/,"")},triggerEvent:N,downloadLink:$,EventBus:class{constructor(){this._events=[]}on(e,t){if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)this.on(e[n],t);else(this._events[e]||(this._events[e]=[])).push(t)}once(e,t){let n=this;function r(){n.off(e,r),t.apply(null,arguments)}r.fn=t,this.on(e,r)}off(e,t){if(arguments.length||(this._events=[]),Array.isArray(e))for(let n=0,r=e.length;n<r;n++)this.off(e[n],t);const n=this._events[e];if(!n)return;1==arguments.length&&(this._events[e]=null);let r,o=n.length;for(;o--;)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}}emit(e){let t=[...this._events[e]];if(t)for(let n=0,r=t.length;n<r;n++)try{t[n].apply(null,[...arguments].slice(1))}catch(t){new Error(t,`event handler for "${e}"`)}}},stopDefault:function(e){e.preventDefault()},_on:z,_off:q,_getHttpCodeMsg:function(e,t={},n="系统异常，请稍后重试"){return Object.assign({400:"错误请求",401:"未授权，请重新登录",403:"拒绝访问",404:"请求错误,未找到该资源",405:"请求方法未允许",408:"系统请求超时，请稍后重试",500:"服务器端出错",501:"网络未实现",502:"网络错误",503:"服务不可用",504:"网络超时",505:"http版本不支持该请求"},t)[String(e)]||n},getStorageSzie:B,Cookies:J,cookie:function(e,t,n){return e?j(t)?J.get(e):void J.set(e,t,n):J.clear()},Locals:Y,local:function(e,t){return e?j(t)?Y.get(e):void Y.set(e,t):Y.clear()},localExpires:function(e,t,n){if(!e)return Y.clear();let o,i=!1,a=Y.get("EXPIRES");if("boolean"===r(n)&&a&&(i=n),j(t)){let t=Y.get(e);return t&&t.startTime?(o=i?a>Date.now()&&(t.value||t):!!(t.expires&&t.expires>Date.now())&&(t.value||t),o||Y.remove(e)):o=t,o}if(S(t))Y.remove(e);else{if(i)o={value:t,startTime:Date.now()};else{let e,i=r(n);if("string"===i)e=new Date(n);else if("number"===i){let t=n,r=e=new Date;r.setDate(r.getDate()+t)}o=e?{value:t,startTime:Date.now(),expires:e.getTime()}:t}if(o)return Y.set(e,o)}},Sessions:X,session:function(e,t){return e?j(t)?X.get(e):void X.set(e,t):X.clear()},_getMonthDays:function(e=new Date,t){let n,r;e instanceof Date?(n=e.getFullYear(),r=e.getMonth()):"number"==typeof e&&(n=e,r=t-1);let o=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==r&&G(n)?o[r]+1:o[r]},_isLeapYear:G,_parseDate:function(e,t="yyyy-MM-DD"){let n={y:0,M:1,D:0,H:0,h:0,m:0,s:0,S:0};t.replace(/([^yMDhmsS]*?)(([yMDhmsS])\3*)([^yMDhmsS]*?)/g,(function(t,r,o,i,a,l,c){return e=e.replace(new RegExp(r+"(\\d{"+o.length+"})"+a),(function(e,t){return n[i]=parseInt(t),""})),""})),n.M--;let r=new Date(n.y,n.M,n.D,n.h,n.m,n.s);return 0!==n.S&&r.setMilliseconds(n.S),r},formatDurationToFriendly:function(e){return e<60?e+"秒":e<3600?(e-e%60)/60+"分"+e%60+"秒":e<86400?(e-e%3600)/60/60+"小时"+Math.round(e%3600/60)+"分":(e/60/60/24).toFixed(1)+"天"},regHtmlRepImg:function(e,t){let n=new RegExp(/(\<img )([^>]*)(src=")([^"]*)([^>]*\>)/,"g");return e.replace(n,(function(e,n,r,o,i,a,l,c){let s=n+r+o;return s+=t(i,e)||i,s+=a,s}))},regHtmlBreakList:function(e){return e.split(/\n|\r/g).map(((e,t)=>C(e)))},clearEmptyTags:function(e){e.replace(/<([a-h|j-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,"")},_regAngle:function(e,t){let n=new RegExp(t||/[&"'+#↵\r\n\t]/,"g"),r={"&":"＆","'":"＇",'"':"＂","#":"＃","+":"＋"};return e.replace(n,(function(e){return r[e]||""}))},_trimEmoji:function(e){return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},_trimSpecial:function(e,t){let n="[";return n+=t||"`~!@#$^&*()=|+{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？↵\r\n\t",n+="]",n=new RegExp(n,"g"),e.replace(n,"")},_telFormat:e=>(e=String(e)).replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"),getFileURL:Z,loadResource:function(e,t="js"){return t?"css"===t?function(e){return new Promise(((t,n)=>{let r=k.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=()=>t(e),r.onerror=e=>n(e),k.head.appendChild(r)}))}(e):"js"===t?function(e){return new Promise(((t,n)=>{let r=k.createElement("script");r.type="text/javascript",r.onload=r.onreadystatechange=function(){r.readyState?"loaded"==r.readyState||"complete"==r.readyState?(r.onreadystatechange=null,t(e)):n(r):t(e)},r.onerror=e=>n(e),r.src=e,k.body.appendChild(r)}))}(e):void 0:Promise.reject()},preLoadStyle:function(e,t){return new Promise(((n,r)=>{let o=k.createElement("link");o.rel="preload",o.as=t||"style",o.href=e,o.onload=()=>n(e),o.onerror=e=>r(e),k.head.appendChild(o)}))},loadResourceCode:function(e,t){return!!t&&("js"==t?function(e){let t=k.createElement("script");t.type="text/javascript";try{t.appendChild(k.createTextNode(e))}catch(n){t.text=e}k.body.appendChild(t)}(e):"css"==t?function(e){let t=k.createElement("style");t.type="text/css";try{t.appendChild(k.createTextNode(e))}catch(n){t.styleSheet.cssText=e}k.head.appendChild(t)}(e):void 0)},imageLoaded:te,getImgeInfo:function(e,t){return new Promise((function(n,r){if(!e)return n({});let o=e.size,i={type:e.type,name:e.name,size:o,size_KB:_float(o/1024,2),size_MB:_float(o/1024/1024,2)};if(e.lastModifiedDate&&(i.date=D(e.lastModifiedDate,"yyyy-MM-DD hh:mm:ss")),t){let t=Z(e);t?te(t).then((function(e){n(Object.assign(i,{width:e.width,height:e.height,blob:t,image:e}))})):n(i)}else n(i)}))},downloadIamge:re,canvasToDataURL:oe,dataURLToBlob:e=>{let t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,i=new Uint8Array(o);for(;o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:n})},dataURLToBuffer:function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");let n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(let e=0;e<r;e++)i[e]=n.charCodeAt(e);return o},dataURLToFile:(e,t)=>{let n=e.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);for(;i--;)a[i]=o.charCodeAt(i);return new File([a],t,{type:r})},fileToDataURL:function(e){return new Promise((function(t,n){let r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){console.log("读取失败",e)},r.onloadend=function(e){},r.readAsDataURL(e)}))},imageToBlob:function(e){return new Promise((function(t,n){let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},r.send()}))},imageToCanvas:function(e,t){return new Promise(((n,r)=>{te(e,!0).then((r=>{let o=k.createElement("canvas");if(o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),t)return n(oe(o,e)),!1;n(o)}))}))},isWechat:ie};return t.default})()}));