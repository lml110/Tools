!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("baseTools",[],t):"object"==typeof exports?exports.baseTools=t():e.baseTools=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var t={};e.d(t,{default:function(){return he}});var n=function(e){return e.replace(/.+\./,"").toLowerCase()};function r(e){const t=Object.prototype.toString;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Promise]":"promise","[object Map]":"map","[object Set]":"set","[object Map Iterator]":"map-iterator","[[object Symbol]]":"symbol","[object Module]":"module"}[t.call(e)]||t.call(e)}var o=function(e){let t=[];return function e(n){let o=r(n);if(t.includes(n))return;t.push(n);let i="array"===o?[]:"object"===o?{}:n;if("array"===o)for(let t=0;t<n.length;t++)i.push(e(n[t]));else if("object"===o)for(let t in n)n.hasOwnProperty(t)&&(i[t]=e(n[t]));return i}(e)},i=function(e){return"object"===r(e)};const a="object"==typeof e.g&&null!==e.g&&e.g.Object===Object&&e.g,l="object"==typeof globalThis&&null!==globalThis&&globalThis.Object==Object&&globalThis,u="object"==typeof self&&null!==self&&self.Object===Object&&self;var c=l||a||u||Function("return this")(),s=function(e,t,n){let r,o,a,l,u,s,f=0,g=!1,p=!1,d=!0;const h=!t&&0!==t&&"function"==typeof c.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){const n=r,i=o;return r=o=void 0,f=t,l=e.apply(i,n),l}function y(e,t){return h?(c.cancelAnimationFrame(u),c.requestAnimationFrame(e)):setTimeout(e,t)}function b(e){const n=e-s;return void 0===s||n>=t||n<0||p&&e-f>=a}function w(){const e=Date.now();if(b(e))return v(e);u=y(w,function(e){const n=e-f,r=t-(e-s);return p?Math.min(r,a-n):r}(e))}function v(e){return u=void 0,d&&r?m(e):(r=o=void 0,l)}function j(...e){const n=Date.now(),i=b(n);if(r=e,o=this,s=n,i){if(void 0===u)return function(e){return f=e,u=y(w,t),g?m(e):l}(s);if(p)return u=y(w,t),m(s)}return void 0===u&&(u=y(w,t)),l}return t=+t||0,i(n)&&(g=!!n.leading,p="maxWait"in n,a=p?Math.max(+n.maxWait||0,t):a,d="trailing"in n?!!n.trailing:d),j.cancel=function(){void 0!==u&&function(e){if(h)return c.cancelAnimationFrame(e);clearTimeout(e)}(u),f=0,r=s=o=u=void 0},j.flush=function(){return void 0===u?l:v(Date.now())},j.pending=function(){return void 0!==u},j};const f=function(e){return e&&"object"==typeof e&&e.get?e:{get:()=>e}};var g=function(e){return"number"===r(e)?e:+e},p=function(e=9,t=0){return Math.floor(Math.random()*(e-t+1)+t)},d=function(e,t=2){return Number.prototype.toFixed.call(g(e),t)},h=function(e,t){return g(d(e,t))},m=function(e){try{return JSON.parse(e)}catch(t){return e}},y=function(e,t,n){let o=e;return"function"===r(t)?o=e.filter(t):"string"===r(t)&&(o=e.filter((e=>e[t]))),n&&(o=o.map((e=>e[n]))),o};function b(e,t,n,o={}){const{childKey:i="children",sucessFn:a=function(e){this.push(e)}}=o;let l=[];return"array"===r(e)&&(l=e.reduce((function(e,r,o,l){if(t(r))a.call(e,r);else{let e=y(l,((e,t)=>n(e,r)));e&&1==e.length?e[0][i]?a.call(e[0][i],r):e[0][i]=[r]:console.log("查询错误",r,e)}return e}),[])),l}let w,v,j;const S=function(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=w(o,t);if(i&&n.push(i),v){let e=v(o,t);if(e&&o[e]){let t=S(o[e],o);j&&(n=j(n,t)||n)}}}return n};let D,x;const E=function(e,t){let n;for(let r=0;r<e.length;r++){let o=e[r];if(D(o,t))return o;if(x){let e=x(o);e&&(n=E(e,o))}if(n)return n}return n};var M=function(e,t=2){if(!t||t<0)return str;let n="";const r=e<0,o=String(Math.abs(e));return o.length<t&&(n=new Array(t-o.length+1).join("0")),(r?"-":"")+n+o},O=function(e){return void 0===e},T=function(e){return!e&&0!==e},_=function(e){let t=r(e);return"date"===t?e:e?"string"===t&&e.includes("-")?new Date(e.replace(/-/g,"/")):new Date(e):new Date},C=function(e,t="yyyy-MM-DD hh:mm:ss"){let n={"M+":(e=_(e)).getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in n)n.hasOwnProperty(e)&&new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t},A=c.location||{},R=function(e,t,n){let r=-1,o=e.length;for(;++r<o;)t.call(n,e[r],r,"array")},L=function(e,t,n){for(let r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,"object")},P=function(e,t,n){if(t)return"array"===r(e)?R(e,t,n):"object"===r(e)?L(e,t,n):void 0};const k=function(e){if(1==e.length)return[e];let t=[];for(let n=0;n<e.length;n++){let r=e[n],o=e.slice(0);o.splice(n,1);let i=k(o);for(let e=0;e<i.length;e++)i[e].unshift(r);t=t.concat(i)}return t},F=function(e,t,n=[],r=[]){if(1===t)return n.push(...e.map((e=>[...r,e]))),n;for(let o=0;o<e.length-t+1;o++){let i=[...r,e[o]];F(e.slice(o+1),t-1,n,i)}return n};var U=(e,t)=>{e||(e="");let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n},I={_deepCopy:o,_cloneObj:function(e){let t=Array.isArray(e)?[]:{};if(JSON)try{t=JSON.parse(JSON.stringify(e))}catch(n){console.log("stringify",n),t=o(e)}else t=o(e);return t},getFormData:(e={},t={})=>{let n=new FormData;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t]);for(let e in t)if(t.hasOwnProperty(e)&&t[e]&&t[e].length){let r=t[e];for(let t=0,o=r.length;t<o;t++)n.append(e,r[t])}return n},typeOf:r,debounce:s,throttle:function(e,t,n){let r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),s(e,t,{leading:r,trailing:o,maxWait:t})},definePros:function(e,t,n){return n?Object.defineProperty(e,n,f(t)):t&&"object"==typeof t?Object.defineProperties(e,function(e){let t={};for(let n in e)t[n]=f(e[n]);return t}(t)):e},_keyid:function(){return Number(Math.random().toString().substr(3,8)+Date.now()).toString(36)},_seedId:function(e){let t="0";if(e)for(let n=0;n<e;n++)t+=p();return g(t)},_toNumber:g,_toNumFixed:h,formatJsonStr:function(e,t){return e?t?e.split(t):"string"===typeOf(e)?m(e):"array"===typeOf(e)&&e:[]},getFileName:function(e){return e&&e.replace(/(.*\/)*([^.]+).*/gi,"$2")||""},getFileExtName:n,babelToFileName:function(e,t){return t?e.replace(/[A-Z]/g,(function(e,t){return t?"-"+e.toLowerCase():e.toLowerCase()})):e.replace(/\-\b(\w)|\-\s(\w)/g,(function(e,t){return t.toUpperCase()}))},_float:function(e,t){let n=Math.pow(10,t||2);return Math.round(e*n)/n},numberPad:M,numberComma:function(e,t=3){return(e=String(e).split("."))[0]=e[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),e.join(".")},numberRandom:p,afreshSetTree:b,arrayToTree:function(e,t,n){if(t=Object.assign({parentProperty:"parentId",childrenProperty:"children",customID:"id",rootID:0},t),!Array.isArray(e))throw new TypeError("Expected an array but got an invalid argument");return b(e,(e=>e[t.parentProperty]==t.rootID),((e,n)=>e[t.customID]==n[t.parentProperty]),{sucessFn:n,childKey:t.childrenProperty})},filterList:function(e,t,n,o){if("array"!==r(e)||"function"!==r(t))return!1;if(w=t,n){let e=r(n);v="function"===e?n:"string"===e&&(e=>n),j=o}return S(e)},findTarget:function(e,t,n){if("array"!==r(e)||"function"!==r(t))return!1;if(D=t,n){let e=r(n);x="function"===e?n:"string"===e&&(e=>e[n])}return E(e)},isChinese:function(e){return/^[\u4e00-\u9fa5]{0,}$/.test(e)},isEmptyObject:function(e){for(let t in e)return!1;return!0},isUndefined:O,isObject:i,isNulls:function(e){return!e||0==e},_noValue:T,checkEmail:function(e){return/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(e)},checkPhone:function(e){return!!/^1\d{10}$/.test(e)},_formatDate:C,_getAllDate:function(e,t=["SUN","MON","TUE","WED","THU","FRI","SAT"]){let n={year:(e=_(e)).getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()};for(let e in n)n.hasOwnProperty(e)&&(n[e]=M(n[e]));return n.week_key=e.getDay(),n.week=t[n.week_key],n},_getAllParams:e=>{e=e||A.href;let t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"params",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=14;for(;o--;)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,(function(e,n,o){n&&(r[t.q.name][n]=o)})),r},_getParams:function(e,t){e||(e=A.href);let n={};if(!e)return n;if(t)return function(e,t){e||(e=A.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}(e,t);let r=/(\?)(?!.*\1)+[^#]*/.exec(e);return r=r?r[0]:"",r.replace(/([^?&=]+)=([^?&=]*)/g,(function(e,t,r){let o=decodeURIComponent(t),i=decodeURIComponent(r);return i=String(i),n[o]=i,e})),n},_paramsToString:function(e,t,n=[void 0,null]){let o=[];return P(e,(function(e,t){if(n&&n.includes(e))return!1;let i="string"===r(e)?e:JSON.stringify(e);o.push(t+"="+i)})),"string"===r(t)?o.length?t+o.join("&"):"":o},getNameOrKey:y,mergeJson:function(e,...t){let n=e?new Map:new Set;return t&&t.length>1&&t.map((function(t){"array"==r(t)&&t.reduce((function(t,n){return e?n&&n[e]&&(t.has(n[e])?console.log("重名元素",n):t.set(n[e],n)):t.has(n)?console.log("重名元素",n):t.add(n),t}),n)})),e?Array.from(n.values()):Array.from(n)},isArrRepeat:function(e,t){if(1==t){let t={};for(let n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1}return new Set(e).size!=e.length},getPermutation:k,getCombine:F,_compareVersion:function(e,t){e=e.split("."),t=t.split(".");let n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let r=0;r<n;r++){let n=+e[r],o=+t[r];if(n>o)return 1;if(n<o)return-1}return 0},Cutsubstr:function(e,t=12,n=!0){if(!e||!t)return"";let r="";for(let o=0;o<e.length&&t>0;o++)r+=e.substr(o,1),t-=n&&e.charCodeAt(o)>127?2:1;return r.length<e.length&&(r+="..."),r},_for:P,_forObject:L,_forEach:R,_filter:function(e,t,n){return t?"object"===typeOf(e)?function(e,t,n){let r={},o=typeOf(t);for(let i in e)e.hasOwnProperty(i)&&("function"===o&&t.call(n,e[i],i)||"array"===o&&t.includes(i))&&(r[i]=e[i]);return r}(e,t,n):"array"===typeOf(e)?Array.prototype.filter.call(e,t,n):void 0:e},_toFixed:d,_trim:U},$=c.navigator||{},N=new class{constructor(e){this.versions=this.getVersions(),this.language=this.getLanguage()}getVersions(){let e=$.userAgent,t=e.toLowerCase();return $.appVersion,{trident:e.includes("Trident"),presto:e.includes("Presto"),webKit:e.includes("AppleWebKit"),gecko:e.includes("Gecko")&&!e.includes("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.includes("Android")||e.includes("Linux"),iPhone:e.includes("iPhone"),iPad:e.includes("iPad"),webApp:!e.includes("Safari"),isWechat:"micromessenger"==t.match(/MicroMessenger/i),weibo:"weibo"==t.match(/WeiBo/i),qq:"qq"==t.match(/QQ/i)}}getLanguage(){let e=$.browserLanguage||$.language;return e&&e.toLowerCase()}getIosVersion(){let e=$.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);return e?e[1].replace(/_/g,"."):""}getWechatVersion(){let e=$.userAgent&&$.userAgent.match(/MicroMessenger\/([\d\.]+)/i);return e?e[1]:""}},B=N.versions,z=c.document||{};const q=z.createElement("div").style,V=function(){let e,t=["t","webkitT","MozT","msT","OT"],n=0,r=t.length;for(;n<r;n++)if(e=t[n]+"ransform",e in q)return t[n].substr(0,t[n].length-1);return!1}();function W(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))}var K=function(e,t="click"){let n;c.MouseEvent?n=new MouseEvent(t):(n=z.createEvent("MouseEvents"),n.initMouseEvent(t,!0,!1,c,0,0,0,0,0,!1,!1,!1,!1,0,null)),e.dispatchEvent(n)},H=z.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},J=z.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};const Y=["B","KB","MB","GB","TB"];function G(e){let t=0;for(;e>1024;)e/=1024,++t;return`${h(e)}${Y[t]}`}var X=function(e){if(!e)return!1;let t=0;return L(e,(function(n,r){t+=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r>=1&&r<=126||65376<=r&&r<=65439?t++:t+=2}return t}(e.getItem(r))})),{size:t,unit:G(t),maxSize:5120}},Q={get(e){let t=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(z.cookie);return"array"===r(t)&&t[1]},set(e,t,n={}){if(!e)return this.clear();if(T(t)&&(n.expires=-1),"number"===r(n.expires)){let e=n.expires,t=n.expires=new Date;t.setDate(t.getDate()+e)}return z.cookie=[e,"=",t,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")},remove(e){if(e)return this.set(e)},clear(e){if(e)this.remove(e);else{let e=this.keys();for(let t=e.length;t--;)this.remove(e[t])}},keys:()=>z.cookie.match(/[^ =;]+(?=\=)/g),info:()=>({unit:"KB",currentSize:z.cookie.length?h(z.cookie.length/1024):0,maxSize:4})},Z=function(e){return e?e.replace(/([^\u0000-\u00FF])/g,(e=>encodeURIComponent(e))):e},ee=function(e){return e?decodeURIComponent(e):e},te=function(e){return e?m(ee(e)):e},ne=function(e){return e?Z(JSON.stringify(e)):e},re={get:e=>te(localStorage.getItem(Z(e))),set(e,t){if(!e)return this.clear();T(t)?localStorage.removeItem(Z(e)):localStorage.setItem(Z(e),ne(t))},remove(e){e&&this.set(e)},clear(e){e?this.remove(e):localStorage.clear()},keys:()=>Object.keys(localStorage).map(((e,t)=>ee(e))),info:()=>X(localStorage)},oe={get:e=>te(sessionStorage.getItem(Z(e))),set(e,t){if(!e)return this.clear();T(t)?sessionStorage.removeItem(Z(e)):sessionStorage.setItem(Z(e),ne(t))},remove(e){e&&this.set(e)},clear(e){e?this.remove(e):sessionStorage.clear()},keys:()=>Object.keys(sessionStorage).map(((e,t)=>ee(e))),info:()=>X(sessionStorage)},ie=function(e=new Date){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},ae=c.webkitURL||c.URL,le=function(e){return c.revokeObjectURL?revokeObjectURL(e):ae.revokeObjectURL(e)},ue=function(e,t){return t&&le(t),c.createObjectURL?createObjectURL(e):ae.createObjectURL(e)},ce=function(e,t,n){let r=z.createElement("a");return r.download=t||"photo",r.target="_blank",r.href=e,K(r),n&&n()};const se=function(e,t){return new Promise(((n,r)=>{let o=new Image;t&&(o.crossOrigin="Anonymous"),o.onload=function(){n(o)},o.src=e}))};var fe=function(e,t=!0){return"array"==r(e)?Promise.all(e.map(((e,n)=>se(e,t)))):se(e,t)},ge=function(e){return new Promise((function(t,n){let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},r.send()}))},pe=function(e,t,r){let o={jpg:"image/jpeg",png:"image/png"},i=o[t?/^http/.test(t)?n(t):t:"jpg"]||o.jpg;return e.toDataURL(i,r||.8)},de=B.isWechat,he={server:I,browser:N,versions:B,readyDOM:function(e){z.addEventListener?z.addEventListener("DOMContentLoaded",e,!1):z.attachEvent?z.attachEvent("onreadystatechange",(function(){"interactive"!=z.readystate&&"complete"!=z.readystate||(z.detachEvent("onreadystatechange",arguments.callee),e())})):c.onload=e},prefixStyle:function(e){return!1!==V&&(""===V?e:V+e.charAt(0).toUpperCase()+e.substr(1))},getCssStyle:function(e,t){if(!e.style)return"";let n=e.style[W(t)];if(!n)if(z.defaultView&&z.defaultView.getComputedStyle){let r=z.defaultView.getComputedStyle(e,null);n=r?r.getPropertyValue(t):null}else e.currentStyle&&(n=e.currentStyle[W(t)]);return n.replace(/px$/,"")},triggerEvent:K,downloadLink:ce,EventBus:class{constructor(){this._events=[]}on(e,t){if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)this.on(e[n],t);else(this._events[e]||(this._events[e]=[])).push(t)}once(e,t){let n=this;function r(){n.off(e,r),t.apply(null,arguments)}r.fn=t,this.on(e,r)}off(e,t){if(arguments.length||(this._events=[]),Array.isArray(e))for(let n=0,r=e.length;n<r;n++)this.off(e[n],t);const n=this._events[e];if(!n)return;1==arguments.length&&(this._events[e]=null);let r,o=n.length;for(;o--;)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}}emit(e){let t=this._events[e];if(t){t=[...t];for(let n=0,r=t.length;n<r;n++)try{t[n].apply(null,[...arguments].slice(1))}catch(t){new Error(t,`event handler for "${e}"`)}}}},stopDefault:function(e){e.preventDefault()},_on:H,_off:J,_getHttpCodeMsg:function(e,t={},n="系统异常，请稍后重试"){return Object.assign({400:"错误请求",401:"未授权，请重新登录",403:"拒绝访问",404:"请求错误,未找到该资源",405:"请求方法未允许",408:"系统请求超时，请稍后重试",500:"服务器端出错",501:"网络未实现",502:"网络错误",503:"服务不可用",504:"网络超时",505:"http版本不支持该请求"},t)[String(e)]||n},getStorageSzie:X,Cookies:Q,cookie:function(e,t,n){return e?O(t)?Q.get(e):void Q.set(e,t,n):Q.clear()},Locals:re,local:function(e,t){return e?O(t)?re.get(e):void re.set(e,t):re.clear()},localExpires:function(e,t,n){if(!e)return re.clear();let o,i=!1,a=re.get("EXPIRES");if("boolean"===r(n)&&a&&(i=n),O(t)){let t=re.get(e);return t&&t.startTime?(o=i?a>Date.now()&&(t.value||t):!!(t.expires&&t.expires>Date.now())&&(t.value||t),o||re.remove(e)):o=t,o}if(T(t))re.remove(e);else{if(i)o={value:t,startTime:Date.now()};else{let e,i=r(n);if("string"===i)e=new Date(n);else if("number"===i){let t=n,r=e=new Date;r.setDate(r.getDate()+t)}o=e?{value:t,startTime:Date.now(),expires:e.getTime()}:t}if(o)return re.set(e,o)}},Sessions:oe,session:function(e,t){return e?O(t)?oe.get(e):void oe.set(e,t):oe.clear()},_getMonthDays:function(e=new Date,t){let n,r;e instanceof Date?(n=e.getFullYear(),r=e.getMonth()):"number"==typeof e&&(n=e,r=t-1);let o=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==r&&ie(n)?o[r]+1:o[r]},_isLeapYear:ie,_parseDate:function(e,t="yyyy-MM-DD"){let n={y:0,M:1,D:0,H:0,h:0,m:0,s:0,S:0};t.replace(/([^yMDhmsS]*?)(([yMDhmsS])\3*)([^yMDhmsS]*?)/g,(function(t,r,o,i,a,l,u){return e=e.replace(new RegExp(r+"(\\d{"+o.length+"})"+a),(function(e,t){return n[i]=parseInt(t),""})),""})),n.M--;let r=new Date(n.y,n.M,n.D,n.h,n.m,n.s);return 0!==n.S&&r.setMilliseconds(n.S),r},formatDurationToFriendly:function(e){return e<60?e+"秒":e<3600?(e-e%60)/60+"分"+e%60+"秒":e<86400?(e-e%3600)/60/60+"小时"+Math.round(e%3600/60)+"分":(e/60/60/24).toFixed(1)+"天"},regHtmlRepImg:function(e,t){let n=new RegExp(/(\<img )([^>]*)(src=")([^"]*)([^>]*\>)/,"g");return e.replace(n,(function(e,n,r,o,i,a,l,u){let c=n+r+o;return c+=t(i,e)||i,c+=a,c}))},regHtmlBreakList:function(e){return e.split(/\n|\r/g).map(((e,t)=>U(e)))},clearEmptyTags:function(e){e.replace(/<([a-h|j-z]+?)(?:\s+?[^>]*?)?>\s*?<\/\1>/gi,"")},_regAngle:function(e,t){let n=new RegExp(t||/[&"'+#↵\r\n\t]/,"g"),r={"&":"＆","'":"＇",'"':"＂","#":"＃","+":"＋"};return e.replace(n,(function(e){return r[e]||""}))},_trimEmoji:function(e){return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},_trimSpecial:function(e,t){let n="[";return n+=t||"`~!@#$^&*()=|+{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？↵\r\n\t",n+="]",n=new RegExp(n,"g"),e.replace(n,"")},_telFormat:e=>(e=String(e)).replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"),getFileURL:ue,loadResource:function(e,t="js"){return t?"css"===t?function(e){return new Promise(((t,n)=>{let r=z.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=()=>t(e),r.onerror=e=>n(e),z.head.appendChild(r)}))}(e):"js"===t?function(e){return new Promise(((t,n)=>{let r=z.createElement("script");r.type="text/javascript",r.onload=r.onreadystatechange=function(){r.readyState?"loaded"==r.readyState||"complete"==r.readyState?(r.onreadystatechange=null,t(e)):n(r):t(e)},r.onerror=e=>n(e),r.src=e,z.body.appendChild(r)}))}(e):void 0:Promise.reject()},preLoadStyle:function(e,t){return new Promise(((n,r)=>{let o=z.createElement("link");o.rel="preload",o.as=t||"style",o.href=e,o.onload=()=>n(e),o.onerror=e=>r(e),z.head.appendChild(o)}))},loadResourceCode:function(e,t){return!!t&&("js"==t?function(e){let t=z.createElement("script");t.type="text/javascript";try{t.appendChild(z.createTextNode(e))}catch(n){t.text=e}z.body.appendChild(t)}(e):"css"==t?function(e){let t=z.createElement("style");t.type="text/css";try{t.appendChild(z.createTextNode(e))}catch(n){t.styleSheet.cssText=e}z.head.appendChild(t)}(e):void 0)},imageLoaded:fe,getImgeInfo:function(e,t){return new Promise((function(n,r){if(!e)return n({});let o=e.size,i={type:e.type,name:e.name,size:o,size_KB:_float(o/1024,2),size_MB:_float(o/1024/1024,2)};if(e.lastModifiedDate&&(i.date=C(e.lastModifiedDate,"yyyy-MM-DD hh:mm:ss")),t){let t=ue(e);t?fe(t).then((function(e){n(Object.assign(i,{width:e.width,height:e.height,blob:t,image:e}))})):n(i)}else n(i)}))},downloadIamge:function(e,t){return ge(e).then((e=>function(e,t,n){if(n&&(e=new Blob([e],{type:n})),$.msSaveOrOpenBlob)$.msSaveBlob(e,t);else{let n=ue(e);ce(n,t,(()=>le(n)))}return!1}(e,t)))},canvasToDataURL:pe,dataURLToBlob:function(e){let t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,i=new Uint8Array(o);for(;o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:n})},dataURLToBuffer:function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");let n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(let e=0;e<r;e++)i[e]=n.charCodeAt(e);return o},dataURLToFile:function(e,t){let n=e.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);for(;i--;)a[i]=o.charCodeAt(i);return new File([a],t,{type:r})},fileToDataURL:function(e){return new Promise((function(t,n){let r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){console.log("读取失败",e)},r.onloadend=function(e){},r.readAsDataURL(e)}))},imageToBlob:ge,imageToCanvas:function(e,t){return new Promise(((n,r)=>{fe(e,!0).then((r=>{let o=z.createElement("canvas");if(o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),t)return n(pe(o,e)),!1;n(o)}))}))},isWechat:de};return t.default}()}));